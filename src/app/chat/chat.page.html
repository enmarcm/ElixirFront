<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/chats"></ion-back-button>
    </ion-buttons>

    <div class="flex">
      <div>
        <ion-thumbnail>
          <img [src]="userReceiverInfo.image" class="h-12 w-12 rounded-full" />
        </ion-thumbnail>
      </div>

      <div class="flex-grow flex">
        <ion-title class="text-white text-lg"
          >{{userReceiverInfo.userName}}</ion-title
        >
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="bg-gray-200 p-4">
  @if(messages.length > 0){
  <ion-list class="mb-16">
    @for(message of messages; track message.id){
    <ion-item class="rounded-lg my-2 w-3/4" lines="none">
      <div
        class="flex flex-col p-2 w-full"
        [class]="message.isSentByMe ? 'items-end ' : 'items-start'"
      >
        <div class="text-sm font-semibold">
          {{ message.senderData.userName }}
        </div>
        <div
          class="text-md mt-1 rounded-lg p-2"
          [class]="message.isSentByMe ? 'bg-blue-400 shadow-md' : 'bg-green-500 shadow-md'"
        >
          {{ message.message.content }}
        </div>
      </div>
    </ion-item>
    }
  </ion-list>
  }

  <ion-item
    class="fixed inset-x-0 bottom-0 bg-white shadow-2xl p-2 rounded-t-3xl"
  >
    <ion-input
      class="flex-1 border-gray-300 rounded-full p-2"
      placeholder="Escribe un mensaje..."
      [(ngModel)]="newMessage"
    ></ion-input>
    <ion-button
      class="ml-2 bg-blue-600 text-white rounded-full"
      (click)="sendMessage()"
    >
      <ion-icon name="send"></ion-icon>
      <!-- Agrega el Ã­cono de enviar -->
    </ion-button>
  </ion-item>
</ion-content>
