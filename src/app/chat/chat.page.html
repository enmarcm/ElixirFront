<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/chats"></ion-back-button>
    </ion-buttons>
    <ion-title class="text-white text-lg">Chat con</ion-title>
    <!-- Agrega aquÃ­ la miniatura de la foto del usuario -->
  </ion-toolbar>
</ion-header>

<ion-content class="bg-gray-200 p-4">
  
  @if(messages.length > 0){
    <ion-list >
      <ion-item
        *ngFor="let message of messages"
        lines="none"
        class="rounded-xl my-2 max-w-3/4"
      >
        <!-- [class]="message.isSentByMe ? 'bg-blue-400' : 'bg-green-500'" -->
        <div
          class="flex flex-col p-2"
          [class]="message.isSentByMe ? 'items-end ' : 'items-start'"
        >
          <div class="text-sm font-semibold">
            {{ message.senderData.userName }}
          </div>
          <div
            class="text-md mt-1 rounded-lg p-2"
            [class]="message.isSentByMe ? 'bg-blue-400 shadow-md' : 'bg-green-500 shadow-md'"
          >
            {{ message.message.content }}
          </div>
        </div>
      </ion-item>
    </ion-list>
  }

  <ion-item
    class="fixed inset-x-0 bottom-0 bg-white shadow-2xl p-2 rounded-t-3xl"
  >
    <ion-input
      class="flex-1 border-gray-300 rounded-full p-2"
      placeholder="Escribe un mensaje..."
      [(ngModel)]="newMessage"
    ></ion-input>
    <ion-button
      class="ml-2 bg-blue-600 text-white rounded-full"
      (click)="sendMessage()"
    >
      <ion-icon name="send"></ion-icon>
      <!-- Agrega el Ã­cono de enviar -->
    </ion-button>
  </ion-item>
</ion-content>
