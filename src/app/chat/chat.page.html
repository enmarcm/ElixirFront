
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/chats"></ion-back-button>
    </ion-buttons>

    <div class="flex py-2">
      <div>
        <ion-thumbnail>
          <img [src]="userReceiverInfo.image" class="h-12 w-12 rounded-full" />
        </ion-thumbnail>
      </div>

      <div class="flex-grow flex">
        <ion-title class="text-dark text-lg"
          >{{userReceiverInfo.userName}}</ion-title
        >
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="bg-gray-200 p-4" [scrollEvents]="true">
  @if(messages.length > 0){
  <ion-list class="mb-16">
    @for(message of messages; track (message.id + message.isSendByMe)){

    <ion-item>
      <div
        class="flex w-full"
        [class]="message.isSendByMe ? 'justify-end' : 'justify-start'"
      >
        <div
          class="max-w-[75%] rounded-xl flex"
          [class]="message.isSendByMe ? 'bg-blue-600'  : 'bg-violet-800'"
        >
          <div class="p-2 text-white">{{ message.message.content }}</div>
        </div>
      </div>
    </ion-item>
    }
  </ion-list>
  }

  <ion-item
    class="fixed inset-x-0 bottom-0 bg-white shadow-2xl p-2 rounded-t-3xl"
  >
    <ion-input
      class="flex-1 border-gray-300 rounded-full p-2"
      placeholder="Escribe un mensaje..."
      [(ngModel)]="newMessage"
    ></ion-input>
    <ion-button
      class="ml-2 bg-blue-600 text-white rounded-full p-2"
      (click)="sendMessage()" shape="round"
    >
      <ion-icon name="send"></ion-icon>
      <!-- Agrega el Ã­cono de enviar -->
    </ion-button>
  </ion-item>
</ion-content>
